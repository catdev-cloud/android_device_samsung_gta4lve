# Fastbootd service for TWRP on Unisoc / Samsung
# This file ONLY handles fastbootd startup â€” USB gadget handled by init.recovery.usb.rc

service fastbootd /system/bin/fastbootd
    class main
    user root
    group root system shell
    seclabel u:r:recovery:s0
    disabled
    oneshot

# Trigger fastbootd when property is set from recovery UI
on property:sys.fastbootd=1
    start fastbootd

# Trigger fastbootd when USB config requests it
on property:sys.usb.config=fastboot
    start fastbootd

# Optional: prop to check if it started
on property:init.svc.fastbootd=running
    setprop sys.fastbootd.active 1
