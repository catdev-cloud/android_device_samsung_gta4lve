# Fastbootd service for TWRP on Unisoc / Samsung
# This file ONLY handles fastbootd startup â€” USB gadget handled by init.recovery.usb.rc

service fastbootd /system/bin/fastbootd
    class main
    user root
    group root system shell
    seclabel u:r:fastbootd:s0
    disabled
    oneshot

# Trigger fastbootd when property is set from recovery
on property:sys.fastbootd=1
    start fastbootd

# Start fastbootd when USB composition requests fastboot mode
on property:sys.usb.config=fastboot
    start fastbootd

# Confirm fastbootd is running
on property:init.svc.fastbootd=running
    setprop sys.fastbootd.active 1
